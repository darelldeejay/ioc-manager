<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>IOC Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Estilos propios -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">

  <style>
    /* Ajuste de logo */
    #corner-logo {
      position: fixed;
      bottom: 16px;
      left: 16px;
      width: 96px;
      height: auto;
      opacity: .85;
      z-index: 1040;
    }
    @media (max-width: 576px) {
      #corner-logo { width: 68px; }
    }

    /* Toasts: abajo derecha */
    #toast-portal {
      position: fixed;
      bottom: 16px;
      right: 16px;
      z-index: 1060;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-width: min(90vw, 560px);
      width: max-content;
      pointer-events: none;
    }

    .toast {
      pointer-events: auto;
      border: none !important;
      box-shadow: 0 6px 18px rgba(0,0,0,.25);
    }

    /* Modo oscuro */
    .bg-dark .hint-box {
      background: #1f1f1f;
      color: #e9ecef;
      border-color: #495057;
    }

    .hint-box {
      font-size: .9rem;
      border: 1px dashed #ced4da;
      border-radius: .5rem;
      padding: .75rem;
      background: #f8f9fa;
      color: #212529;
    }
  </style>
</head>
<body class="bg-light">

<div class="container py-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <button class="btn btn-outline-secondary btn-sm" onclick="toggleTheme()">ðŸŒ™ Modo Oscuro</button>
    <div class="d-flex align-items-center gap-2">
      <button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNotifs" aria-controls="offcanvasNotifs">
        ðŸ”” Notificaciones
        <span id="notif-badge" class="badge text-bg-danger rounded-pill d-none">0</span>
      </button>
      <a href="/logout" class="btn btn-outline-danger btn-sm">Logout</a>
    </div>
  </div>

  <!-- AquÃ­ va el resto del contenido original del index.html del usuario -->
  <!-- Este espacio estÃ¡ preparado para incluir el contenido sin alteraciones -->

</div>

<!-- Logo fijo -->
<img id="corner-logo" src="{{ url_for('static', filename='img/logo-dpb.svg') }}" alt="Logo DPB">

<!-- Offcanvas Notificaciones -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNotifs" aria-labelledby="offcanvasNotifsLabel">
  <div class="offcanvas-header">
    <h5 id="offcanvasNotifsLabel">Notificaciones</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
  </div>
  <div class="offcanvas-body">
    <div id="notifList"></div>
  </div>
</div>

<!-- Portal de toasts -->
<div id="toast-portal" aria-live="polite" aria-atomic="true"></div>

<script>
  function toggleTheme() {
    const body = document.body;
    const isDark = body.classList.toggle('bg-dark');
    body.classList.toggle('text-white', isDark);
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  }

  window.onload = () => {
    if (localStorage.getItem('theme') === 'dark') toggleTheme();
  };
</script>

</body>
</html>
